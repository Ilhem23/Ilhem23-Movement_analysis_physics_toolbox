# Ilhem23-Movement_analysis_physics_toolbox
Project intro to DS
Install the android/ iOS physics toolbox suite app on your smartphone.
Physics toolbox suit app on playstore

Use the multiple recording function to record the sensors (Force-g, Linear Accelerometer, Gyroscope) and create 3 files each containing:

20 X-movements with 2s pause between each movement
20 0-movements with 2s pause between each movement
2 min of recording of your daily movements (phone in your pocket or bag for example)
You may find a Physics suit youtube tutorial via this link.

Create a shiny interface allowing to :
load a file produced with physics suite
visualize it (choice of sensors …)
process it (see details)
visualize the results of the processing
export the results of the processing function as a csv files with two additional colums to store labels (X,O,Noise) and group name (Last names of the group members separated with _)
Details on the processing
Create a function extract_feature_long(data,threeshold_mean,threeshold_sd,threeshold_t) that:
compute the norm of the acceleration in three dimension with the gravity removed gN=|gFx2+gFy2+gFz2−0.8|
compute the left rolling average gNm of gN over 10 measurements (see the RcppRoll package)
compute the left rolling standard deviation gNsd of gN over 10 measurements
filter the data too keep the points where gNm>threeshold_mean and gNsd>threeshold_sd
compute dti=timei−timei−1
create an id called pid for each group g of points where dti<threeshold_time ,∀i∈g
add back the removed point with a pid set to 0
Some example of results are provided below.

library(readr)
data = read_delim("./testSensorT.csv",delim=";",locale = locale(dec=","))
X_long=extract_feature_long(data,0.5,0.2,0.5)
str(X_long)
FALSE tibble [3,640 × 16] (S3: tbl_df/tbl/data.frame)
FALSE  $ time  : num [1:3640] 0.927 0.927 0.987 0.988 0.99 ...
FALSE  $ gFx   : num [1:3640] -0.0325 -0.0325 -0.0108 0.0649 -0.1227 ...
FALSE  $ gFy   : num [1:3640] -0.0037 -0.0037 -0.0306 -0.0924 -0.0714 ...
FALSE  $ gFz   : num [1:3640] 1.2 1.2 1.22 1.24 1.05 ...
FALSE  $ ax    : num [1:3640] 0.0946 0.0792 0.0792 0.0792 0.0792 ...
FALSE  $ ay    : num [1:3640] 0.0767 -0.082 -0.082 -0.082 -0.082 ...
FALSE  $ az    : num [1:3640] -0.143 -0.692 -0.692 -0.692 -0.692 ...
FALSE  $ wx    : num [1:3640] -1.06 -1.06 -1.06 -1.06 -1.06 ...
FALSE  $ wy    : num [1:3640] -0.0159 -0.0159 -0.0159 -0.0159 -0.0159 ...
FALSE  $ wz    : num [1:3640] 0.226 0.226 0.226 0.226 0.226 ...
FALSE  $ gN    : num [1:3640] 0.63 0.63 0.678 0.758 0.324 ...
FALSE  $ gNm   : num [1:3640] 0.538 0.599 0.659 0.673 0.759 ...
FALSE  $ gNsd  : num [1:3640] 0.313 0.383 0.432 0.435 0.528 ...
FALSE  $ dt    : num [1:3640] NA 0.000641 0.059366 0.001906 0.001216 ...
FALSE  $ switch: num [1:3640] 1 0 0 0 0 0 0 0 0 0 ...
FALSE  $ pid   : num [1:3640] 1 1 1 1 1 1 1 1 1 1 ...
library(ggplot2)
ggplot(X_long %>% filter(pid>0)) + geom_line(aes(x=time,y=gNsd,color=as.factor(pid),group=pid)) + geom_point(data=X_long %>% filter(pid==00),aes(x=time,y=gNsd),color="black") 
## Warning: Removed 9 rows containing missing values (geom_point).


When exporting the results of this processing the user wil; be asked to enter the group names and labels all the point with a pid !=0 will be labeled with the supplied label and the other with N for noise.

Create a function extract_feature_large(data,threeshold_mean,threeshold_sd,threeshold_t) that:
compute the norm of the acceleration in three dimension with the gravity removed gN=|gFx2+gFy2+gFz2−0.8|
compute the left rolling average gNm of gN over 10 measurements (see the RcppRoll package)
compute the left rolling standard deviation gNsd of gN over 10 measurements
filter the data too keep the points where gNm>threeshold_mean and gNsd>threeshold_sd
compute dti=timei−timei−1
create an id called pid for each group g of points where dti<threeshold_time ,∀i∈g
find all the groups of measurements with a duration between 1s and 3s.
removes the others groups of measurements
create a feature localtimei=timei−mini∈g(timei)
create a feature tbini=floor(localtimei∗2)
compute the mean for each group and each tbin of gFx,gFy,gFz,wx,wy,wz
transform the data to large format where each row is a group and each column a sensor mean over a time bin.
Some example of results are provided below.

X_large=extract_feature_large(data,0.2,0.2,0.5)
str(X_large)
FALSE tibble [7 × 19] (S3: tbl_df/tbl/data.frame)
FALSE  $ pid       : num [1:7] 2 3 4 5 6 7 9
FALSE  $ gFx_mean_0: num [1:7] 0.449 1.545 0.985 1.081 1.26 ...
FALSE  $ gFx_mean_1: num [1:7] 1.584 -0.514 1.255 1.687 0.23 ...
FALSE  $ gFx_mean_2: num [1:7] 1.52 3.85 1.94 1.33 1.97 ...
FALSE  $ gFy_mean_0: num [1:7] 0.0812 -0.552 -0.954 -1.4069 -0.2105 ...
FALSE  $ gFy_mean_1: num [1:7] -1.427 -2.244 -2.327 -1.885 -0.785 ...
FALSE  $ gFy_mean_2: num [1:7] -0.0488 -1.5786 -0.3127 0.0058 -1.3311 ...
FALSE  $ gFz_mean_0: num [1:7] 1.208 1.101 1.212 0.984 1.021 ...
FALSE  $ gFz_mean_1: num [1:7] 0.185 0.281 0.41 0.363 0.805 ...
FALSE  $ gFz_mean_2: num [1:7] -0.323 0.165 0.623 -0.302 0.199 ...
FALSE  $ wx_mean_0 : num [1:7] 1.794 -0.427 1.01 0.736 -0.191 ...
FALSE  $ wx_mean_1 : num [1:7] -0.8684 0.3917 0.0518 -0.6859 -0.0461 ...
FALSE  $ wx_mean_2 : num [1:7] 0.0632 -0.4992 -1.1101 0.1435 -1.3258 ...
FALSE  $ wy_mean_0 : num [1:7] -1.622 0.682 1.312 2.319 -1.819 ...
FALSE  $ wy_mean_1 : num [1:7] -0.519 0.649 1.002 0.728 -2.06 ...
FALSE  $ wy_mean_2 : num [1:7] 0.627 -0.167 -1.18 1.742 0.938 ...
FALSE  $ wz_mean_0 : num [1:7] -2.432 -1.159 -3.153 -4.604 -0.619 ...
FALSE  $ wz_mean_1 : num [1:7] 5.437 -0.289 3.673 5.258 -5.199 ...
FALSE  $ wz_mean_2 : num [1:7] 2.03 9.74 2.98 1.54 6.27 ...
When exporting the results of this processing the user will be asked to enter the group names and labels.

Process the three files and send the results.
Outputs
shiny app on shinyapps.io
email with app code, app url, 3 input files and 6 output files
use a coherent naming scheme for the files : NAME1_NAME2_NAME3_INPUT_X.csv,NAME1_NAME2_NAME3_INPUT_O.csv, NAME1_NAME2_NAME3_INPUT_N.csv for the input files of X, O and Noise and NAME1_NAME2_NAME3_OUTPUT_LARGE_X.csv, NAME1_NAME2_NAME3_OUTPUT_LONG_X.csv
